╔═══════════════════════════════════════════════════════════════════════════╗
║                    СТРУКТУРА ОТЧЁТА report_new.jrxml                     ║
╚═══════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────┐
│                              СТРАНИЦА 1                                 │
│                            (Title Band)                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│                     Это тестовый шаблон отчёта                         │
│                          (Заголовок 16pt)                              │
│                                                                         │
│                                                                         │
│                    ┌─────────────────────────┐                         │
│                    │                         │                         │
│                    │     [Картинка]          │                         │
│                    │     flower1.png         │                         │
│                    │      300 x 200          │                         │
│                    │                         │                         │
│                    └─────────────────────────┘                         │
│                                                                         │
│                                                                         │
│                ┌────────────────┬────────────────┐                     │
│                │   Ячейка 1     │   Ячейка 2     │  ← Заголовки       │
│                │  (серый фон)   │  (серый фон)   │                    │
│                ├────────────────┼────────────────┤                     │
│                │    {CELL1}     │    {CELL2}     │  ← Значения        │
│                │                │                │                    │
│                └────────────────┴────────────────┘                     │
│                                                                         │
│                                                                         │
│ ═══════════════════════ РАЗРЫВ СТРАНИЦЫ ═══════════════════════       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                              СТРАНИЦА 2                                 │
│                          (Page Header Band)                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│                        Ведомость координат                             │
│                          (Заголовок 16pt)                              │
│                                                                         │
│                                                                         │
│      Цена: ________________                                            │
│             {PRICE}                                                     │
│                                                                         │
│      Площадь: ________________                                         │
│                {AREA}                                                   │
│                                                                         │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────┐   │
│ │                    ТАБЛИЦА КООРДИНАТ                            │   │
│ │                   (Column Header Band)                          │   │
│ ├───────────┬──────────────────────┬──────────────────────────────┤   │
│ │     №     │          X           │            Y                 │   │
│ │  (серый)  │       (серый)        │         (серый)              │   │
│ ├───────────┼──────────────────────┼──────────────────────────────┤   │
│ │     1     │      55.7558         │         37.6173              │   │ ← Detail Band
│ ├───────────┼──────────────────────┼──────────────────────────────┤   │   (повторяется)
│ │     2     │      55.7559         │         37.6174              │   │
│ ├───────────┼──────────────────────┼──────────────────────────────┤   │
│ │     3     │      55.7560         │         37.6175              │   │
│ ├───────────┼──────────────────────┼──────────────────────────────┤   │
│ │    ...    │        ...           │           ...                │   │
│ ├───────────┼──────────────────────┼──────────────────────────────┤   │
│ │     N     │       X_N            │          Y_N                 │   │
│ └───────────┴──────────────────────┴──────────────────────────────┘   │
│                                                                         │
│     ↑ Таблица автоматически растягивается по количеству строк          │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘


╔═══════════════════════════════════════════════════════════════════════════╗
║                           ПАРАМЕТРЫ ОТЧЁТА                                ║
╚═══════════════════════════════════════════════════════════════════════════╝

┌─────────────────┬───────────────┬─────────────────────────────────────────┐
│   Параметр      │     Тип       │           Где используется             │
├─────────────────┼───────────────┼─────────────────────────────────────────┤
│ CELL1           │ String        │ Первая ячейка таблицы (стр. 1)         │
│ CELL2           │ String        │ Вторая ячейка таблицы (стр. 1)         │
│ IMAGE_PATH      │ InputStream   │ Картинка (стр. 1)                      │
│ PRICE           │ String        │ Поле "Цена" (стр. 2)                   │
│ AREA            │ String        │ Поле "Площадь" (стр. 2)                │
│ (datasource)    │ Collection    │ Таблица координат (стр. 2)             │
└─────────────────┴───────────────┴─────────────────────────────────────────┘


╔═══════════════════════════════════════════════════════════════════════════╗
║                         ПОЛЯ ДЛЯ ТАБЛИЦЫ (FIELDS)                        ║
╚═══════════════════════════════════════════════════════════════════════════╝

┌─────────────────┬───────────────┬─────────────────────────────────────────┐
│     Поле        │     Тип       │           Описание                      │
├─────────────────┼───────────────┼─────────────────────────────────────────┤
│ number          │ Integer       │ Номер строки (1, 2, 3...)              │
│ x               │ String        │ Координата X                           │
│ y               │ String        │ Координата Y                           │
└─────────────────┴───────────────┴─────────────────────────────────────────┘


╔═══════════════════════════════════════════════════════════════════════════╗
║                         РАЗМЕРЫ И ПОЗИЦИИ                                 ║
╚═══════════════════════════════════════════════════════════════════════════╝

Размер страницы:    595 x 842 точек (A4)
Отступы:            20 точек со всех сторон
Рабочая область:    555 точек в ширину

Картинка:
  • Позиция: x=127, y=50
  • Размер: 300x200
  • Выравнивание: по центру

Таблица 2x2 (стр. 1):
  • Позиция: x=127, y=270
  • Ширина ячейки: 150
  • Высота ячейки: 30

Таблица координат (стр. 2):
  • Колонка №: ширина 50, x=50
  • Колонка X: ширина 200, x=100
  • Колонка Y: ширина 200, x=300
  • Высота строки: 25


╔═══════════════════════════════════════════════════════════════════════════╗
║                    СООТВЕТСТВИЕ DTO ↔ ПАРАМЕТРЫ                          ║
╚═══════════════════════════════════════════════════════════════════════════╝

ClientData          →  JRXML параметр  →  Где отображается
─────────────────────────────────────────────────────────────────────────────
.column             →  CELL1            →  Первая ячейка (стр. 1)
.value              →  CELL2            →  Вторая ячейка (стр. 1)
.crs                →  PRICE            →  Цена (стр. 2)
.area               →  AREA             →  Площадь (стр. 2)
.coordinates[]      →  datasource       →  Таблица координат (стр. 2)
  └─ .x             →    field: x       →    Колонка X
  └─ .y             →    field: y       →    Колонка Y


╔═══════════════════════════════════════════════════════════════════════════╗
║                         BANDS (СЕКЦИИ ОТЧЁТА)                             ║
╚═══════════════════════════════════════════════════════════════════════════╝

<title>           →  Печатается 1 раз в начале (страница 1)
                     - Заголовок отчёта
                     - Картинка
                     - Таблица 2x2
                     - Разрыв страницы

<pageHeader>      →  Печатается на каждой странице (кроме первой)
                     - Заголовок "Ведомость координат"
                     - Поля Цена и Площадь

<columnHeader>    →  Заголовки колонок таблицы (только стр. 2)
                     - № | X | Y

<detail>          →  Повторяется для каждой записи
                     - Строка с координатами
                     - Автоматически увеличивается

<pageFooter>      →  Подвал (не используется)

<summary>         →  Итоги (не используется)


╔═══════════════════════════════════════════════════════════════════════════╗
║                            ПРИМЕРЫ ДАННЫХ                                 ║
╚═══════════════════════════════════════════════════════════════════════════╝

ПРИМЕР 1: Отчёт для точки (1 координата)
────────────────────────────────────────
CELL1: "Точка А"
CELL2: "Центр города"
PRICE: "500 000 руб."
AREA: "0.01 м²"
Координаты: [(1, "55.7558", "37.6173")]

Результат: 2 страницы, таблица с 1 строкой

ПРИМЕР 2: Отчёт для полигона (10 координат)
─────────────────────────────────────────────
CELL1: "Полигон ABC"
CELL2: "Земельный участок"
PRICE: "5 000 000 руб."
AREA: "1000 м²"
Координаты: [(1, "55.7558", "37.6173"), ..., (10, "55.7567", "37.6182")]

Результат: 2 страницы, таблица с 10 строками


═══════════════════════════════════════════════════════════════════════════
                              ГОТОВО! 🎉
═══════════════════════════════════════════════════════════════════════════
